# REST API v1

This document describes the API between the Opark client and the Opark
backend.

All requests done to this API should have an appropriate User-Agent
header set so the server knows which client it is talking to.
As an example the Opark Android application reports "Opark/2.0".

All requests must be made over HTTPS, any request made over HTTP will
be rejected by the server.

## Endpoint
Root endpoint: https://opera-park.appspot.com/api/v1/

## Authentication

HTTP Basic authentication is used for all requests. The user name
should be the Google ID token generated by the Opark Android
application while the password should be left blank.

## Registering on the wait list

Add yourself to the wait list to get a push notification when
the parking is no longer full.
```
POST /waitList
```
``` json
{
  "pushToken":"<push token>"
}
```

### Parameters
All parameters should be provided as JSON in the body of the request.

Name | Type | Description
---- | ---- | -----------
pushToken | string | The FCM push token that should get a push notification when the parking is no longer full.

### Response
```
Status: 200 OK
```
``` json
{
  "message":"ok",
  "result": "success",
  "status":200
}
```

## Unregistering from the wait list

Remove yourself from the wait list.
```
DELETE /waitList
```

### Response

```
Status: 204 No Content
```
